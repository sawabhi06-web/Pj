<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cake Celebration</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background: linear-gradient(to bottom, #ffe6f0, #fff0f5);
    overflow: hidden;
    font-family: 'Comic Sans MS', cursive;
    text-align: center;
    animation: fadeInPage 2s ease;
  }
  @keyframes fadeInPage { from { opacity: 0; } to { opacity: 1; } }

  /* Flags */
  .flags { display: flex; justify-content: center; gap: 10px; padding: 10px; }
  .flag { width: 40px; height: 60px; background: #ff4d80; clip-path: polygon(0 0, 100% 0, 100% 70%, 50% 100%, 0 70%); animation: swing 2s ease-in-out infinite; }
  @keyframes swing {0%,100%{transform:rotate(5deg);}50%{transform:rotate(-5deg);} }

  /* Cake */
  .cake { margin: 200px auto 20px; width: 280px; height: 180px; position: relative; perspective: 1000px; cursor:pointer; }
  .half { width: 50%; height: 100%; float: left; transition: transform 1s cubic-bezier(.68,-0.55,.27,1.55); }
  .layer { width: 100%; height: 60px; border-radius: 20px 20px 0 0; position: relative; box-shadow: inset 0 -4px 10px rgba(0,0,0,0.2),0 5px 10px rgba(0,0,0,0.1);}
  .top { background: linear-gradient(#ffb6c1,#ff99b3); }
  .middle { background: linear-gradient(#ffe4e1,#ffd6db); }
  .bottom { background: linear-gradient(#ffb6c1,#ff8fb3); border-radius:0 0 20px 20px;}
  .icing { position:absolute; top:0; left:0; width:100%; height:15px; background: linear-gradient(#fff,#ffe9f0); border-radius:20px 20px 0 0; box-shadow: inset 0 -2px 5px rgba(0,0,0,0.1);}
  .candles {position:absolute; top:-40px; left:50%; transform:translateX(-50%); display:flex; gap:15px;}
  .candle {width:12px; height:40px; background:yellow; border-radius:3px; position:relative;}
  .candle::before {content:""; position:absolute; top:-15px; left:50%; transform:translateX(-50%); width:12px; height:15px; background:orange; border-radius:50%; animation:flicker 0.3s infinite;}
  @keyframes flicker {0%,100%{opacity:1;}50%{opacity:0.6;}}

  /* Knife */
  .knife-container {position:absolute; pointer-events:none; top:50%; left:50%; z-index:10;}
  .knife {display:flex; width:120px; height:25px; transform-origin:center; animation:bounce 1s ease-in-out infinite alternate;}
  @keyframes bounce {0%{transform:translateY(0px) rotate(0deg);}50%{transform:translateY(-10px) rotate(-2deg);}100%{transform:translateY(0px) rotate(0deg);}}
  .blade {width:80px; height:100%; background:linear-gradient(135deg,#dcdcdc,#f5f5f5,#aaa); clip-path:polygon(0 0,100% 40%,100% 60%,0 100%); border:1px solid #888;}
  .handle {width:40px; height:100%; background:#333; border-radius:5px; margin-left:2px;}

  /* Celebration text in horizontal box */
  .celebrate {
    position:absolute;
    top:160px; /* pushed slightly down to not block candles */
    left:50%;
    transform:translateX(-50%);
    font-size:50px;
    font-weight:bold;
    color:#ff1493;
    background:#fffdd0;
    padding:10px 50px; /* shorter vertical, longer horizontal */
    border-radius:15px;
    border:2px solid #ff69b4;
    text-shadow:0 0 10px #fff,0 0 20px #ff69b4;
    opacity:0;
    transition:opacity 1s ease;
    z-index:15;
    animation: glow 1.5s infinite alternate;
    white-space: nowrap; /* prevent text wrapping */
  }

  @keyframes glow {from { text-shadow: 0 0 10px #fff, 0 0 20px #ff69b4; } to { text-shadow: 0 0 20px #fff, 0 0 40px #ff1493; }}

  /* Note */
  .note {position:absolute; top:80px; left:50%; transform:translateX(-50%); font-size:22px; color:#ff1493; font-weight:bold; text-shadow:0 0 5px #fff; }

  /* Next button */
  .next-btn {position:absolute; bottom:30px; left:50%; transform:translateX(-50%) scale(0); padding:12px 25px; font-size:20px; background:#ff4d80; color:#fff; border:none; border-radius:12px; cursor:pointer; display:block; box-shadow: 0 5px 15px rgba(0,0,0,0.2); opacity:0; transition: all 0.5s ease;}
  .next-btn.show {opacity:1; transform:translateX(-50%) scale(1); animation:bounceBtn 1s ease infinite alternate;}
  @keyframes bounceBtn {0%{transform:translateX(-50%) scale(1);}50%{transform:translateX(-50%) scale(1.1);}100%{transform:translateX(-50%) scale(1);} }

  /* Balloon container replacement */
  #balloon-container {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 60%;
    pointer-events: none;
    overflow: visible;
    z-index: 1;
  }

  .balloon {
    position: absolute;
    bottom: 0;
    border-radius: 50% 50% 50% 50%;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    animation: flutter 3s ease-in-out infinite alternate;
  }

  .balloon::after {
    content: '';
    position: absolute;
    width: 2px;
    background: #555;
    bottom: -35px;
    animation: stringSway 2s ease-in-out infinite alternate;
  }

  @keyframes flutter {
    0% { transform: translateX(0) rotate(0deg); }
    50% { transform: translateX(10px) rotate(5deg); }
    100% { transform: translateX(0) rotate(-5deg); }
  }

  @keyframes stringSway {
    0% { transform: rotate(0deg); }
    50% { transform: rotate(3deg); }
    100% { transform: rotate(-2deg); }
  }

  .rise {
    animation: rise 6s cubic-bezier(0.65, 0, 0.35, 1) forwards;
  }

  @keyframes rise {
    0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 1; }
    25% { transform: translateY(-30vh) scale(1.05) rotate(5deg); }
    50% { transform: translateY(-60vh) scale(1) rotate(-5deg); }
    75% { transform: translateY(-90vh) scale(1.05) rotate(2deg); }
    100% { transform: translateY(-120vh) scale(0.9) rotate(-3deg); opacity: 0; }
  }

  @media (max-width: 600px) {
    .balloon { 
      width: 20px !important;
      height: 30px !important;
    }
    .balloon::after { height: 25px; }
  }

  /* Fireworks */
  .firework { position: absolute; width: 5px; height: 5px; border-radius: 50%; animation: explode 1s ease-out forwards; z-index: 5; }
  @keyframes explode { from { transform: scale(0); opacity: 1; } to { transform: scale(3); opacity: 0; } }
</style>
</head>
<body>

<div class="flags">
  <div class="flag"></div>
  <div class="flag" style="background:#ffa500;"></div>
  <div class="flag" style="background:#00bfff;"></div>
  <div class="flag" style="background:#32cd32;"></div>
  <div class="flag" style="background:#ff69b4;"></div>
</div>

<div class="note">ðŸŽ‚ Move the knife to cut the cake!</div>

<div class="cake" id="cake">
  <div class="half" id="leftHalf">
    <div class="layer top"><div class="icing"></div></div>
    <div class="layer middle"></div>
    <div class="layer bottom"></div>
  </div>
  <div class="half" id="rightHalf">
    <div class="layer top"><div class="icing"></div></div>
    <div class="layer middle"></div>
    <div class="layer bottom"></div>
  </div>
  <div class="candles"><div class="candle"></div><div class="candle"></div><div class="candle"></div></div>
</div>

<div class="knife-container" id="knifeContainer">
  <div class="knife">
    <div class="blade"></div>
    <div class="handle"></div>
  </div>
</div>

<div class="celebrate" id="celebrate">ðŸŽ‰ Happy Celebration! ðŸŽ‚</div>

<div id="balloon-container"></div>

<button class="next-btn" id="nextBtn">Cake cut ho gaya ðŸŽ‚ â†’ Aage chalen â¤µ</button>

<script>
const knifeContainer = document.getElementById("knifeContainer");
const cake = document.getElementById("cake");
const leftHalf = document.getElementById("leftHalf");
const rightHalf = document.getElementById("rightHalf");
const celebrate = document.getElementById("celebrate");
const nextBtn = document.getElementById("nextBtn");

// Knife follows cursor
document.addEventListener("mousemove", e => { knifeContainer.style.left = e.pageX + "px"; knifeContainer.style.top = e.pageY + "px"; });
document.addEventListener("touchmove", e => { const touch = e.touches[0]; knifeContainer.style.left = touch.pageX + "px"; knifeContainer.style.top = touch.pageY + "px"; });

// Fireworks
function launchFireworks() { for (let i = 0; i < 30; i++) { let f = document.createElement("div"); f.classList.add("firework"); f.style.left = Math.random()*100+"vw"; f.style.top = Math.random()*50+"vh"; f.style.background = `hsl(${Math.random()*360},100%,50%)`; document.body.appendChild(f); setTimeout(()=>f.remove(),1000); } }

// Cake cut logic
let cutDone = false;
document.addEventListener("mousemove", checkCut);
document.addEventListener("touchmove", checkCut);

function checkCut(e){
  const rect = cake.getBoundingClientRect();
  const x = e.pageX || (e.touches && e.touches[0].pageX);
  const y = e.pageY || (e.touches && e.touches[0].pageY);
  if(x > rect.left && x < rect.right && y > rect.top && y < rect.bottom){
    if(!cutDone){
      cutDone = true;
      leftHalf.style.transform = "translateX(-150px) rotate(-15deg)";
      rightHalf.style.transform = "translateX(150px) rotate(15deg)";
      celebrate.style.opacity = 1;
      nextBtn.classList.add("show");

      // Fireworks loop
      setInterval(launchFireworks,1500);

      // Balloon system
      const balloonColors = ['#FF3B3F','#FF9F1C','#2EC4B6','#E71D36','#FFAC81','#FF6F61','#6A5ACD','#FFD700'];
      const balloonContainer = document.getElementById('balloon-container');
      const totalBalloons = 12;
      let balloons = [];

      function createBalloon(leftPos){
        const balloon = document.createElement('div');
        balloon.classList.add('balloon');
        balloon.style.left = `${leftPos}%`;

        const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
        const width = Math.min(35 + Math.random()*15, vw * 0.08);
        const height = width * 1.3;
        balloon.style.width = `${width}px`;
        balloon.style.height = `${height}px`;

        const stringLength = height * 0.7;
        balloon.style.setProperty('--string-length', `${stringLength}px`);
        balloon.style.setProperty('--string-bottom', `-${stringLength}px`);
        balloon.style.backgroundColor = balloonColors[Math.floor(Math.random()*balloonColors.length)];

        balloon.style.setProperty('position', 'absolute');
        balloon.style.setProperty('bottom', '0px');
        balloon.style.setProperty('overflow', 'visible');
        balloonContainer.appendChild(balloon);
        return balloon;
      }

      for(let i=0;i<totalBalloons;i++){
        const left = 5 + i*7;
        const balloon = createBalloon(left);
        balloons.push(balloon);
      }

      setInterval(()=>{
        if(balloons.length===0) return;
        const balloon = balloons.shift();
        balloon.classList.add('rise');

        const left = Math.random()*90 + 5;
        const newBalloon = createBalloon(left);
        balloons.push(newBalloon);
      },1000);
    }
  }
}

// Next button
nextBtn.addEventListener("click", ()=>{ window.location.href = "fourth.html"; });
</script>

</body>
</html>
